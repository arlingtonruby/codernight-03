require 'rspec'
require 'pry'
require_relative '../lib/rock_bottom'


SIMPLE_CAVE = <<EOF.lines
100

################################
~                              #
#         ####                 #
###       ####                ##
###       ####              ####
#######   #######         ######
#######   ###########     ######
################################
EOF

COMPLEX_CAVE = <<EOF.lines
2461

#####################################################################################################################################################################################################
~                                                                                                                                                                                                   #
#                                                                                                                                                                                                   #
#                                                                                                                                                                                                   #
#                                                                                                                                                                                                   #
#                                                                                                                                                                                                   #
#                                                                                                                                                                                                   #
#                                                                                                                                                                                                   #
#                                                                                                                                                                                                   #
#                                                                                                                                                                                                   #
#                                                                                                                                                                                                   #
#                                                                                                                                                                                                   #
#                                                                                                                                                                                                   #
###                         ##                                              #######                                                                                         ####                    #
###                         ##                                             ########                                                                                         ####                    #
###                         ##                   ##                        ########                                                ####                                     ####                    #
###                         ##                 ####                        ########        ###                                     ####                                     ####                    #
####                       ###                 ####                        ########        ###                                     ####                                     ####                    #
####                       ###                 ####                      ##########        ###                                     ####                                     ####                    #
####                       ###                 ####                      ##########      #####                                     ####                                     ####                    #
######                     ###                #####                      ##########      #####                                  #######                                     ####                    #
#######                   #####               #####                      ##########      #####                                  #######                                     ####  ########          #
########                  #####             #######                      ##########    ########                               #########                  ######             ####  ########          #
########                  ######            #######                      ##########    ########                               ##########                 ######             ####  ########          #
########                  ######            #######                      ##########    ########                               ##########                 ######             ####  ########          #
########                  ######           ########                      ##########    ########                              ###########                 ######             ####  ########          #
########                  ######           ########                      ##########    ########                              ############                ######             ####  ########          #
########                  ######           ########                      ##########    ########                              ############                ######             ####  ########          #
########                  ######           ########                      ##########    ########                              ############             #########             ####  ########          #
##########                ######           ########                      ##########    ########                           ###############          ############             ####  ########          #
###########               ######          #########                      ##########    ########                          ################         #############             ####  ########          #
###########               ######         ############                    ##########    ########                         #################         #############             ##############          #
############              ######        ##############                   ##########    ########                         #################        ##############             ##############          #
############              ######        ###############               #############    ###########                      #################        ##############             ##############          #
############              ######       ################            ################    ############                     #################        ##############             #################       #
############              ######       ##################          ################    #############                    #################        ##############             #################       #
##################        ######       ####################        ################    #############                    #################        ##############            ####################     #
##################        ######       ####################        ################    #############                    #################        ##############            ######################   #
##################        ######       #####################       ################    #############                    #################        ##############            ######################   #
##################        ######       #####################       ################    #############                    #################        ##############            #######################  #
##################        ######       #####################       ################    ###############                  #################        ##############            #######################  #
##################        #######      #####################       ################    ################                 #################        ##############            #######################  #
##################        ########     #####################       ################    ##################               #################        ##############           ########################  #
##################        ########     #####################       ################    ####################             #################        ##############          #########################  #
#####################################################################################################################################################################################################
EOF

RSpec.describe "Hitting Rock Bottom" do
  it "runs for 100 steps on a simple cave" do
    rb = RockBottom.new SIMPLE_CAVE
    expect(rb.call).to eq "1 2 2 4 4 4 4 6 6 6 1 1 1 1 4 3 3 4 4 4 4 5 5 5 5 5 2 2 1 1 0 0"
  end

  it "processes the complex cave" do
    rb = RockBottom.new COMPLEX_CAVE
    expect(rb.call).to eq "1 12 1 5 8 8 9 10 17 17 18 20 24 24 24 24 24 24 32 32 32 32 32 32 32 32 9 5 1 1 9 11 29 30 32 32 32 32 32 22 20 19 18 13 10 10 8 4 4 3 3 19 19 20 21 23 23 24 24 26 32 32 32 32 32 32 32 22 22 22 21 21 21 6 6 2 1 1 1 1 1 1 1 32 30 30 30 8 8 5 5 2 2 2 8 19 19 19 20 21 26 26 27 28 28 29 29 30 30 30 30 30 30 30 30 30 30 30 30 30 17 16 15 15 15 11 8 8 6 6 6 1 1 1 1 3 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0"
  end
end

